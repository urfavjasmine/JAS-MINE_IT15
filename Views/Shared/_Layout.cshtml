@using Microsoft.AspNetCore.Http

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>@ViewData["Title"] - JAS-MINE</title>

    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="~/css/site.css" />

    <style>

        html, body {
            height: 100%;
            margin: 0;
        }

        .app-shell {
            height: 100vh;
            display: flex;
            overflow: hidden;
        }

        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            background: #f3f5f7;
        }

        .page-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }

        /* Mobile sidebar */
        .sidebar-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,.5);
            z-index: 40;
            display: none;
        }

        .sidebar-mobile {
            position: fixed;
            width: 260px;
            left: -260px;
            top: 0;
            height: 100%;
            z-index: 50;
            transition: left .3s;
        }

            .sidebar-mobile.open {
                left: 0;
            }

        @@media (min-width: 992px) {
            .sidebar-mobile,
            .sidebar-overlay {
                display: none !important;
            }
        }
    </style>
</head>

<body>
    <div class="app-shell">

        <!-- Desktop Sidebar -->
        <div class="d-none d-lg-block">
            <partial name="_Sidebar" />
        </div>

        <!-- Mobile Sidebar -->
        <div id="sidebarOverlay" class="sidebar-overlay"></div>

        <div id="mobileSidebar" class="sidebar-mobile d-lg-none">
            <partial name="_Sidebar" />
        </div>

        <!-- Main Content -->
        <div class="main-content">

            <!-- Header -->
            <partial name="_DashboardHeader" />

            <main class="page-content">
                @RenderBody()
            </main>

        </div>
    </div>

    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        const mobileSidebar = document.getElementById("mobileSidebar");
        const overlay = document.getElementById("sidebarOverlay");

        function openSidebar() {
            mobileSidebar.classList.add("open");
            overlay.style.display = "block";
        }

        function closeSidebar() {
            mobileSidebar.classList.remove("open");
            overlay.style.display = "none";
        }

        overlay?.addEventListener("click", closeSidebar);

        document.addEventListener("click", function (e) {
            if (e.target.closest("#sidebarToggleBtn")) {
                openSidebar();
            }
        });
    </script>

    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
